# SwitchColor Chrome Extension

一个简单易用的Chrome浏览器插件，用于快速切换网页背景颜色。

## 功能特性

- 🎨 **颜色选择器**: 支持选择任意颜色作为背景
- 🔄 **一键切换**: 点击按钮即可在原始背景和选择的颜色之间切换
- 💾 **记忆功能**: 自动保存用户选择的颜色偏好
- 🌐 **广泛兼容**: 支持大多数网站，包括SPA单页应用
- 📱 **响应式设计**: 界面适配不同屏幕尺寸
- ⚡ **性能优化**: 轻量级设计，不影响页面性能

## 安装方法

### 方法一：开发者模式安装（推荐）

1. 下载或克隆此项目到本地
2. 打开Chrome浏览器，进入扩展程序管理页面：
   - 地址栏输入 `chrome://extensions/`
   - 或者点击菜单 → 更多工具 → 扩展程序
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 安装完成！

### 方法二：打包安装

1. 在扩展程序管理页面点击"打包扩展程序"
2. 选择项目文件夹进行打包
3. 生成.crx文件后拖拽到扩展程序页面安装

## 使用说明

### 基本操作

1. **打开插件**: 点击浏览器工具栏中的SwitchColor图标
2. **选择颜色**: 使用颜色选择器选择想要的背景颜色（默认为蓝色）
3. **切换背景**: 点击"切换背景颜色"按钮
4. **恢复原始**: 再次点击按钮即可恢复原始背景

### 界面说明

```
┌─────────────────────────────┐
│  🎨 SwitchColor             │
├─────────────────────────────┤
│  点击下方按钮更换背景        │
├─────────────────────────────┤
│  选择颜色: [🎨] #0000FF     │
├─────────────────────────────┤
│    [切换背景颜色]           │
├─────────────────────────────┤
│  ● 原始背景                 │
└─────────────────────────────┘
```

### 状态指示

- 🟢 **绿色圆点**: 当前显示原始背景
- 🟡 **黄色圆点**: 当前显示修改后的背景

### 快捷键

- `Enter` 或 `Space`: 触发背景切换
- `Escape`: 关闭弹出窗口

## 技术实现

### 项目结构

```
switchcolor/
├── manifest.json          # 扩展配置文件
├── popup.html             # 弹出窗口HTML
├── popup.css              # 弹出窗口样式
├── popup.js               # 弹出窗口逻辑
├── content.js             # 内容脚本
├── icons/                 # 图标文件夹
│   └── icon.png          # 扩展图标
└── README.md             # 说明文档
```

### 核心技术

- **Manifest V3**: 使用最新的Chrome扩展API
- **Content Scripts**: 在网页中注入脚本进行背景修改
- **Message Passing**: popup与content script之间的通信
- **CSS Manipulation**: 动态修改页面样式
- **Local Storage**: 保存用户偏好设置

### 兼容性处理

- 智能检测最佳目标元素（body、html、main等）
- 支持SPA应用的动态页面变化
- 处理复杂CSS背景（渐变、图片等）
- 优雅降级处理不支持的页面

## 开发说明

### 开发环境

- Chrome浏览器 88+
- 支持ES6+语法
- 无需额外构建工具

### 调试方法

1. **查看控制台**: 
   - 右键点击扩展图标 → 检查弹出内容
   - 在网页中按F12查看content script日志

2. **调试变量**:
   ```javascript
   // 在网页控制台中查看扩展状态
   console.log(window.SwitchColorDebug);
   ```

3. **重新加载**:
   - 修改代码后在扩展管理页面点击刷新按钮

### 自定义开发

#### 添加新的颜色预设

在 `popup.js` 中修改：

```javascript
// 添加预设颜色
const presetColors = ['#FF0000', '#00FF00', '#0000FF', '#FFFF00'];
```

#### 修改目标元素选择逻辑

在 `content.js` 中的 `findBestTargetElement` 方法中添加新的选择器：

```javascript
const candidates = [
    document.body,
    document.querySelector('.your-custom-selector'),
    // ... 其他选择器
];
```

## 常见问题

### Q: 为什么某些网站无法切换背景？

A: 以下情况可能导致无法切换：
- Chrome内部页面（chrome://）
- 某些有严格CSP策略的网站
- 使用iframe嵌套的复杂页面

### Q: 切换后页面刷新背景会恢复吗？

A: 是的，背景修改只在当前会话有效，刷新页面后会恢复原始状态。

### Q: 如何卸载插件？

A: 在Chrome扩展管理页面找到SwitchColor，点击"移除"按钮。

### Q: 插件会收集用户数据吗？

A: 不会。插件只在本地保存颜色偏好，不会上传任何数据。

## 更新日志

### v1.0.0 (2025-05-27)
- 🎉 首次发布
- ✨ 基础背景切换功能
- 🎨 颜色选择器
- 💾 颜色偏好保存
- 📱 响应式界面设计
- 🔧 SPA应用支持

## 许可证

MIT License - 详见 LICENSE 文件

## 贡献

欢迎提交Issue和Pull Request！

## 联系方式

如有问题或建议，请通过以下方式联系：
- GitHub Issues
- Email: [your-email@example.com]

---

**享受自定义网页背景的乐趣！** 🎨
