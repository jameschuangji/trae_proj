# SwitchColor Chrome Extension

一个简单易用的Chrome浏览器插件，用于快速切换网页背景颜色。

## 功能特性

- 🎨 **自定义背景颜色**：通过颜色选择器选择任意颜色作为网页背景
- 🔄 **一键切换**：轻松在原始背景和自定义背景之间切换
- 💾 **状态记忆**：自动保存每个标签页的背景状态和选择的颜色
- 🎯 **精准控制**：只影响当前活动标签页，不影响其他页面
- ⚡ **性能优化**：轻量级设计，不影响浏览器性能
- 🔒 **隐私保护**：所有数据本地存储，不上传任何信息

## 安装方法

### 开发者模式安装

1. 打开Chrome浏览器
2. 在地址栏输入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本插件的文件夹
6. 插件安装完成，可以在工具栏看到插件图标

## 使用方法

### 基本操作

1. **打开插件**：点击浏览器工具栏中的SwitchColor图标
2. **选择颜色**：使用颜色选择器选择想要的背景颜色（默认为蓝色 #0066cc）
3. **切换背景**：点击"切换背景颜色"按钮应用自定义背景
4. **恢复原始**：再次点击按钮（此时显示为"恢复原始背景"）可恢复网页原始背景

### 界面说明

- **状态提示**：顶部显示当前操作提示信息
- **颜色选择器**：中间的颜色选择控件，旁边显示当前选择的颜色值
- **切换按钮**：主要操作按钮，文字会根据当前状态变化
- **状态指示器**：底部显示当前背景状态（原始背景/自定义背景）

### 快捷键

- **Enter键**：在弹窗中按Enter键可快速执行切换操作
- **Escape键**：按Escape键关闭弹窗

## 技术特性

### 智能状态管理

- 自动保存每个标签页的背景状态
- 记忆用户选择的颜色偏好
- 页面刷新后自动恢复之前的状态

### 兼容性保障

- 智能检测和保存原始背景样式
- 支持各种背景类型（纯色、图片、渐变等）
- 完美恢复原始背景，包括背景图片和复杂样式

### 性能优化

- 使用Chrome Storage API进行高效数据存储
- 监听页面变化，防止样式被覆盖
- 自动清理过期数据，避免存储空间浪费

## 文件结构

```
switchcolor/
├── manifest.json          # 插件配置文件
├── popup.html            # 弹窗界面HTML
├── popup.css             # 弹窗样式文件
├── popup.js              # 弹窗交互逻辑
├── content.js            # 内容脚本（网页注入）
├── background.js         # 后台脚本
├── icons/
│   └── icon.png          # 插件图标
├── images/
│   └── ux.PNG            # UX设计参考图
└── README.md             # 说明文档
```

## 开发说明

### 核心组件

1. **Manifest V3**：使用最新的Chrome扩展API
2. **Content Script**：负责在网页中执行背景切换操作
3. **Background Script**：处理插件后台逻辑和消息传递
4. **Popup Interface**：提供用户交互界面

### 主要API使用

- `chrome.tabs`：获取和操作标签页信息
- `chrome.storage.local`：本地数据存储
- `chrome.runtime.onMessage`：组件间消息通信
- `MutationObserver`：监听DOM变化

### 数据存储结构

```javascript
// 存储键名规则
switchcolor_state_{tabId}        // 标签页背景状态
switchcolor_original_bg_{tabId}  // 原始背景数据
switchcolor_selected_color       // 用户选择的颜色
```

## 版本历史

### v1.0 (当前版本)

- ✅ 基础背景颜色切换功能
- ✅ 颜色选择器界面
- ✅ 状态持久化存储
- ✅ 多标签页独立管理
- ✅ 原始背景完美恢复
- ✅ 现代化UI设计

## 常见问题

### Q: 为什么有些网站的背景无法切换？
A: 某些网站使用了CSS优先级很高的样式或者通过JavaScript动态设置背景。插件会尽力应用自定义背景，但可能在极少数情况下无法完全覆盖。

### Q: 切换背景后页面刷新会恢复吗？
A: 不会。插件会自动保存每个标签页的状态，页面刷新后会自动恢复到之前的背景设置。

### Q: 插件会影响浏览器性能吗？
A: 不会。插件采用轻量级设计，只在需要时才执行操作，对浏览器性能影响微乎其微。

### Q: 数据会被上传到服务器吗？
A: 不会。所有数据都存储在本地，插件不会向任何服务器发送数据。

## 许可证

本项目采用 MIT 许可证。详情请参阅 LICENSE 文件。

## 贡献

欢迎提交Issue和Pull Request来帮助改进这个项目！

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交GitHub Issue
- 发送邮件反馈
